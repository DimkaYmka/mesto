(()=>{"use strict";function e(e,t){e.textContent=t}var t={selectorList:".elements__card",selectorTemplate:"#card",cardImgSelector:".elements__image",cardTitleSelector:".elements__title",cardDeleteBtnSelector:".elements__delete-button",toggleLikeSelector:".elements__vector",activeLikeBtnClass:"elements__vector_active",countLikes:".elements__likes-number"},n={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"popup__save-btn_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"};function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function i(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===r(t)?t:String(t)}var a=function(){function e(t,n,r,o,u,a){var c=this,l=u.handleLikeCard,s=a.handleDeleteCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_deleteCardForSure",(function(){c._handleDeleteCard(c._cardData,c)})),i(this,"_getCardLike",(function(){c._likes.some((function(e){return e._id===c._userId}))?(c._likeButton.classList.add("elements__vector_active"),c.isLiked=!0):c._likeButton.classList.remove("elements__vector_active")})),i(this,"getLikesNumber",(function(e){c._likeNumber.innerHTML=e})),i(this,"likeCard",(function(){c._likeButton.classList.toggle("elements__vector_active")})),i(this,"_setDeleteButton",(function(){c._cardOwner===c._userId&&c._deleteButton.classList.remove("elements__delete-button_hidden")})),this._cardData=t,this._name=t.name,this._link=t.link,this._config=n,this._handleCardClick=r,this._userId=o,this._handleLikeCard=l,this._likes=t.likes,this._handleDeleteCard=s,this._cardOwner=t.owner._id}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._config.selectorTemplate).content.querySelector(".elements__card").cloneNode(!0)}},{key:"deleteCard",value:function(){this._element.remove()}},{key:"_toggleLike",value:function(e){e.classList.toggle(this._config.activeLikeBtnClass)}},{key:"_setEventListeners",value:function(){var e=this,t=this._element.querySelector(this._config.cardDeleteBtnSelector),n=this._element.querySelector(this._config.toggleLikeSelector);t.addEventListener("click",(function(){e._deleteCardForSure()})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),n.addEventListener("click",(function(){e._handleLikeCard(e._cardData)}))}},{key:"createNewCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(this._config.cardImgSelector),this._cardImage.src=this._link,this._cardImage.alt=" ".concat(this._link,"."),this._element.querySelector(this._config.cardTitleSelector).textContent=this._name,this._likeButton=this._element.querySelector(this._config.toggleLikeSelector),this._likeNumber=this._element.querySelector(this._config.countLikes),this._likes=this._cardData.likes,this._likeNumber.innerHTML=this._likes.length,this.isLiked=!1,this._deleteButton=this._element.querySelector(this._config.cardDeleteBtnSelector),this._setDeleteButton(),this._setEventListeners(),this._getCardLike(),this.getLikesNumber(this._likes.length),this._element}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSetting=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._formSetting.inputSelector)),this._submitButton=this._formElement.querySelector(this._formSetting.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._formSetting.inputErrorClass),n.textContent=t,n.classList.add(this._formSetting.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));t.textContent="",e.classList.remove(this._formSetting.inputErrorClass),t.classList.remove(this._formSetting.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.classList.add(this._formSetting.inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._formSetting.inactiveButtonClass),this._submitButton.disabled=!1)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}var y=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close(),t.target.classList.contains("popup__close-popup")&&e.close()}))}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupBigImage=t._popup.querySelector(".popup__big-image"),t._popupTitle=t._popup.querySelector(".popup__big-title"),t}return t=u,(n=[{key:"open",value:function(e,t){b(S(u.prototype),"open",this).call(this),this._popupBigImage.src=t,this._popupBigImage.alt=e,this._popupTitle.textContent=e}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(m);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function C(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===w(t)?t:String(t)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(this,e)});function u(e,t,n){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),C(O(o=i.call(this,e)),"_getInputValues",(function(){var e={};return o._inputList.forEach((function(t){e[t.name]=t.value})),e})),C(O(o),"setEventListeners",(function(){P((r=O(o),j(u.prototype)),"setEventListeners",r).call(r),o._form.addEventListener("submit",(function(e){e.preventDefault(),o._handleProfileFormSubmit(o._getInputValues(),o._btnForm)}))})),o._handleProfileFormSubmit=t,o._form=o._popup.querySelector(".popup__form"),o._inputList=o._form.querySelectorAll(".popup__input"),o._btnForm=o._form.querySelector(n),o}return t=u,(n=[{key:"getInputValues",value:function(){return this._inputFormValues}},{key:"close",value:function(){P(j(u.prototype),"close",this).call(this),this._form.reset()}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(m);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}var R=function(){function e(t){var n=t.profileNameSelector,r=t.profileInfoSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._info=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,info:this._info.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._info.textContent=e.about}},{key:"setUserAvatar",value:function(e){var t=e.link;this._userAvatar.src=t}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var x=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._getResponse)}},{key:"getUserData",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._getResponse)}},{key:"editUserData",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponse)}},{key:"createCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e._id,"/likes"),{method:"PUT",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._getResponse)}},{key:"editUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._getResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._getResponse)}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},H.apply(this,arguments)}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function M(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===N(t)?t:String(t)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(r);if(o){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}(this,e)});function u(e){var t,n,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r=F(n=i.call(this,e)),a=function(){H((t=F(n),J(u.prototype)),"setEventListeners",t).call(t),n._form.addEventListener("submit",(function(e){e.preventDefault(),n._handleProfileFormSubmit()}))},(o=M(o="setEventListeners"))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n._form=n._popup.querySelector(".popup__form"),n._submitButton=n._popup.querySelector(".popup__save-btn"),n}return t=u,(n=[{key:"handleDeleteConfirm",value:function(e){var t=e.handleProfileFormSubmit;this._handleProfileFormSubmit=t}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(m),z=document.querySelector(".profile__edit-button"),K=document.querySelector("#input-name"),Q=document.querySelector("#input-info"),W=document.querySelector(".profile__add-button"),X=(document.querySelector(".popup__big-image"),document.querySelector(".popup__big-title"),document.querySelector(".popup_image"),document.querySelector(".popup__form-profile")),Y=document.querySelector(".popup__form-card"),Z=document.querySelector(".popup__form-avatar"),$=".popup__save-btn",ee="Сохранение...",te=new s(n,X);te.enableValidation();var ne=new s(n,Y);ne.enableValidation();var re=new s(n,Z);re.enableValidation();var oe,ie=new x({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-62",headers:{authorization:"bc440bce-88d2-40de-813f-9186a5211a71","Content-Type":"application/json"}}),ue=new R({profileNameSelector:".profile__name",profileInfoSelector:".profile__text",avatarSelector:".profile__avatar"}),ae=new k(".popup_image"),ce=new G(".popup_delete"),le=new y({renderer:function(e){var t=pe(e).createNewCard();le.addItem(t)}},".elements__list");ie.getUserData().then((function(e){ue.setUserInfo({name:e.name,about:e.about}),ue.setUserAvatar({link:e.avatar}),oe=e._id,ie.getInitialCards().then((function(e){le.renderItems(e)})).catch((function(e){console.log(e)}))})).catch((function(e){return alert(e)}));var se=new I(".popup_profile",(function(t,n){var r=n.textContent;e(n,ee),ie.editUserData(t).then((function(e){ue.setUserInfo(e),se.close()})).catch((function(e){alert(e)})).finally((function(){e(n,r)}))}),$);z.addEventListener("click",(function(){var e=ue.getUserInfo();K.value=e.name,Q.value=e.info,te.resetValidation(),se.open()}));var fe=new I(".popup_card",(function(t,n){var r=n.textContent;e(n,ee),ie.createCard(t).then((function(e){pe(e),le.addItem(pe(e).createNewCard()),fe.close()})).catch((function(e){return alert(e)})).finally((function(){e(n,r)}))}),$);function pe(e){var n=new a(e,t,he,oe,{handleLikeCard:function(e){n.isLiked?ie.deleteLike(e._id).then((function(e){n.isLiked=!1,n.getLikesNumber(e.likes.length),n.likeCard()})).catch((function(e){console.log(e)})):ie.addLike(e).then((function(e){n.isLiked=!0,n.getLikesNumber(e.likes.length),n.likeCard()})).catch((function(e){console.log(e)}))}},{handleDeleteCard:function(e,t){ce.open(),ce.handleDeleteConfirm({handleProfileFormSubmit:function(){ie.deleteCard(e._id).then((function(){t.deleteCard(),ce.close()})).catch((function(e){console.log(e)}))}})}});return n}W.addEventListener("click",(function(){fe.open(),ne.resetValidation()}));var ye=new I(".popup_avatar",(function(t,n){var r=n.textContent;e(n,ee),ie.editUserAvatar(t.link).then((function(e){ue.setUserAvatar({link:e.avatar}),ye.close()})).catch((function(e){console.log(e)})).finally((function(){e(n,r)}))}),$);function he(e,t){ae.open(e,t)}document.querySelector(".profile__avatar-button").addEventListener("click",(function(){re.resetValidation(),ye.open()})),se.setEventListeners(),fe.setEventListeners(),ae.setEventListeners(),ye.setEventListeners(),ce.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0QsR0FBWTVHLE9BQ2QsSUFDQ3lGLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUNDTyxTQUFRLFdBQ1AxTixFQUFnQkMsRUFBU3VOLEVBQzNCLEdBQ0YsR0FBR2hGLEdBWVAsU0FBU2xILEdBQWdCNkIsRUFBTUUsR0FDN0IrSSxHQUFXMEIsS0FBSzNLLEVBQU1FLEVBQ3hCLENBVmVRLFNBQVNDLGNBQWMsMkJBQy9CTyxpQkFBaUIsU0FBUyxXQUMvQjJILEdBQW9CNkIsa0JBQ3BCUSxHQUFZUCxNQUNkLElBVUFQLEdBQWFpQixvQkFDYlQsR0FBYVMsb0JBQ2JwQyxHQUFXb0Msb0JBQ1hILEdBQVlHLG9CQUNabkMsR0FBZW1DLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8tbWFpbi04Ly4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL21lc3RvLW1haW4tOC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tbWFpbi04Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by1tYWluLTgvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLW1haW4tOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLW1haW4tOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLW1haW4tOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8tbWFpbi04Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8tbWFpbi04Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLW1haW4tOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEFwcGx5LmpzIiwid2VicGFjazovL21lc3RvLW1haW4tOC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gc2hvd0xvYWRpbmdUZXh0KGJ0bkZvcm0sIHRleHQpIHtcbiAgYnRuRm9ybS50ZXh0Q29udGVudCA9IHRleHQ7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHNlbGVjdG9yTGlzdDogJy5lbGVtZW50c19fY2FyZCcsXG4gIHNlbGVjdG9yVGVtcGxhdGU6ICcjY2FyZCcsXG4gIGNhcmRJbWdTZWxlY3RvcjogJy5lbGVtZW50c19faW1hZ2UnLFxuICBjYXJkVGl0bGVTZWxlY3RvcjogJy5lbGVtZW50c19fdGl0bGUnLFxuICBjYXJkRGVsZXRlQnRuU2VsZWN0b3I6ICcuZWxlbWVudHNfX2RlbGV0ZS1idXR0b24nLFxuICB0b2dnbGVMaWtlU2VsZWN0b3I6ICcuZWxlbWVudHNfX3ZlY3RvcicsXG4gIGFjdGl2ZUxpa2VCdG5DbGFzczogJ2VsZW1lbnRzX192ZWN0b3JfYWN0aXZlJyxcbiAgY291bnRMaWtlczogJy5lbGVtZW50c19fbGlrZXMtbnVtYmVyJ1xufVxuXG5leHBvcnQgY29uc3QgZm9ybVNldHRpbmcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmUtYnRuJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlLWJ0bl9pbmFjdGl2ZScsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXG59OyIsImltcG9ydCB7Y29uZmlnfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcblxuXG4vL9Ca0LvQsNGB0YFcbmNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY29uZmlnLCBoYW5kbGVDYXJkQ2xpY2ssIHVzZXJJZCwge2hhbmRsZUxpa2VDYXJkfSwge2hhbmRsZURlbGV0ZUNhcmR9KSB7XG4gICAgdGhpcy5fY2FyZERhdGEgPSBjYXJkRGF0YTtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIFxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkO1xuICAgIHRoaXMuX2xpa2VzID0gY2FyZERhdGEubGlrZXNcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcbiAgICB0aGlzLl9jYXJkT3duZXIgPSBjYXJkRGF0YS5vd25lci5faWQ7XG4gIH1cblxuXG4gIC8v0JTQvtCx0LDQstC70LXQvdC40LUg0YHQstC+0LXQuSDQutCw0YDRgtC+0YfQutC4XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgXG4gICAgY29uc3QgbmV3Q2FyZCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc2VsZWN0b3JUZW1wbGF0ZSlcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19jYXJkJylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gbmV3Q2FyZDtcbiAgfVxuXG4gIF9kZWxldGVDYXJkRm9yU3VyZSA9ICgpID0+IHtcbiAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQodGhpcy5fY2FyZERhdGEsIHRoaXMpXG4gIH1cblxuICAvL9GD0LTQsNC70LXQvdC4ZSDQutCw0YDRgtC+0YfQutC4IFxuICBkZWxldGVDYXJkKCkgeyAgXG4gICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKClcbiAgfVxuXG4gIC8v0LTQvtCx0LDQstC70LXQvdC40LUg0LvQsNC50LrQsFxuICBfdG9nZ2xlTGlrZShlbGVtZW50c0xpa2UpIHtcbiAgICBlbGVtZW50c0xpa2UuY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLl9jb25maWcuYWN0aXZlTGlrZUJ0bkNsYXNzKVxuICB9XG5cbiAgLy8g0YHQu9GD0YjQsNGC0LXQu9C4INC90LAg0LTQvtCx0LDQstC70LXQvdC40LUg0LvQsNC50LrQsCwg0YPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4INC4INC+0YLQutGA0YvRgtC40LUg0YTQvtGC0L5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGRlbGV0ZUNhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmNhcmREZWxldGVCdG5TZWxlY3Rvcik7XG4gICAgY29uc3QgZWxlbWVudHNMaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy50b2dnbGVMaWtlU2VsZWN0b3IpO1xuXG4gICAgZGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmRGb3JTdXJlKClcbiAgICB9KVxuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspXG4gICAgfSlcblxuICAgIGVsZW1lbnRzTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKHRoaXMuX2NhcmREYXRhKTtcbiAgICB9KVxuICB9XG5cbiAgLy/QlNC+0LHQsNCy0LvQtdC90LjQtSDRgdCy0L7QtdC5INC60LDRgNGC0L7Rh9C60LhcbiAgY3JlYXRlTmV3Q2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmNhcmRJbWdTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gYCAke3RoaXMuX2xpbmt9LmA7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5jYXJkVGl0bGVTZWxlY3RvcikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcudG9nZ2xlTGlrZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9saWtlTnVtYmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5jb3VudExpa2VzKTtcblxuICAgIHRoaXMuX2xpa2VzID0gdGhpcy5fY2FyZERhdGEubGlrZXM7XG4gICAgdGhpcy5fbGlrZU51bWJlci5pbm5lckhUTUwgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICBcbiAgICB0aGlzLmlzTGlrZWQgPSBmYWxzZTtcbiAgIFxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuY2FyZERlbGV0ZUJ0blNlbGVjdG9yKTsgXG4gICAgdGhpcy5fc2V0RGVsZXRlQnV0dG9uKCk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZ2V0Q2FyZExpa2UoKTtcbiAgICB0aGlzLmdldExpa2VzTnVtYmVyKHRoaXMuX2xpa2VzLmxlbmd0aCk7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG5cbiAgICBcbiAgfVxuXG5cbiAgX2dldENhcmRMaWtlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9saWtlcy5zb21lKGxpa2VyID0+IGxpa2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkKSkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdlbGVtZW50c19fdmVjdG9yX2FjdGl2ZScpO1xuICAgICAgdGhpcy5pc0xpa2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRzX192ZWN0b3JfYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0TGlrZXNOdW1iZXIgPSAobGlrZXNOdW1iZXIpID0+IHtcbiAgICB0aGlzLl9saWtlTnVtYmVyLmlubmVySFRNTCA9IGxpa2VzTnVtYmVyO1xuICB9XG5cbiAgbGlrZUNhcmQgPSAoKSA9PiB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50c19fdmVjdG9yX2FjdGl2ZScpO1xuICB9XG4gIF9zZXREZWxldGVCdXR0b24gPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2NhcmRPd25lciA9PT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudHNfX2RlbGV0ZS1idXR0b25faGlkZGVuJyk7XG4gICAgfVxuICB9XG5cbn07XG5cbmV4cG9ydCB7IENhcmQsIGNvbmZpZ30iLCJpbXBvcnQgeyBmb3JtU2V0dGluZyB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xuXG5cbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtU2V0dGluZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtU2V0dGluZyA9IGZvcm1TZXR0aW5nO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnRcblxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtU2V0dGluZy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU2V0dGluZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICAvL1xuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgLy8gY29uc29sZS5sb2coZXJyb3JFbGVtZW50KTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtU2V0dGluZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtU2V0dGluZy5lcnJvckNsYXNzKTtcbiAgfVxuICAvL1xuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIC8vIGNvbnNvbGUubG9nKGVycm9yRWxlbWVudCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybVNldHRpbmcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtU2V0dGluZy5lcnJvckNsYXNzKTtcblxuICB9XG4gIC8vXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgLy9cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcbiAgICB9KTtcblxuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fZm9ybVNldHRpbmcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtU2V0dGluZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICAvL1xuICBfaGFzSW52YWxpZElucHV0KCkge1xuICBcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cbiAgLy9cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLy9cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciwgZm9ybVNldHRpbmcgfSIsImV4cG9ydCBjbGFzcyBTZWN0aW9ue1xuICAgIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBzZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcmVuZGVySXRlbXMgPSBpdGVtczsgXG4gICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG5cbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKT0+dGhpcy5fcmVuZGVyZXIoaXRlbSkpXG4gICAgICB9XG5cbiAgICAgIGFkZEl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKVxuICAgICAgfVxuICAgIH1cbiIsIlxuZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpXG4gICAgfVxuXG5cbm9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTsgXG59XG5cbmNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcbiB9XG5cbl9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9O1xufVxuXG5zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1wb3B1cCcpKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9KVxuICB9XG5cbn1cblxuXG5cblxuXG5cbiIsImltcG9ydCB7UG9wdXB9IGZyb20gJy4vUG9wdXAuanMnXG5cblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcG9wdXBCaWdJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYmlnLWltYWdlJyk7XG4gICAgICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2JpZy10aXRsZScpO1xuICAgIH1cblxuXG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgdGhpcy5fcG9wdXBCaWdJbWFnZS5zcmMgPSBsaW5rO1xuICAgICAgICB0aGlzLl9wb3B1cEJpZ0ltYWdlLmFsdCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSAgbmFtZTtcblxuICAgICAgfTtcbiAgICAgIFxuICAgICAgXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQsIGJ0bkZvcm1TZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICAgIHRoaXMuX2J0bkZvcm0gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYnRuRm9ybVNlbGVjdG9yKVxuICB9XG5cblxuXG4gIF9nZXRJbnB1dFZhbHVlcyA9ICgpID0+IHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0SXRlbSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dEl0ZW0ubmFtZV0gPSBpbnB1dEl0ZW0udmFsdWU7XG4gICAgfSlcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBnZXRJbnB1dFZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRGb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCksIHRoaXMuX2J0bkZvcm0pO1xuICAgICAgLy8gdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cbn0iLCJcbmV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlSW5mb1NlbGVjdG9yLCAgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XG4gICAgICB0aGlzLl9pbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSW5mb1NlbGVjdG9yKTtcbiAgICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKVxuICAgIH1cbiAgXG4gICAgXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgICBpbmZvOiB0aGlzLl9pbmZvLnRleHRDb250ZW50LFxuICAgICAgfTtcbiAgICB9XG4gIFxuICAgIHNldFVzZXJJbmZvKGlucHV0VmFsdWVzKSB7XG4gICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gaW5wdXRWYWx1ZXMubmFtZTtcbiAgICAgIHRoaXMuX2luZm8udGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlcy5hYm91dDtcbiAgICB9XG5cbiAgICBzZXRVc2VyQXZhdGFyKHtsaW5rfSkge1xuICAgICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBsaW5rO1xuICAgIH1cbiAgfVxuXG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG5cbiAgX2dldFJlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xufVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZSlcbiAgfVxuXG5cbiAgICAvLyBcbiAgICBnZXRVc2VyRGF0YSgpIHtcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlKVxuICAgIH1cbiAgXG4gICAgLy8gXG4gICAgZWRpdFVzZXJEYXRhKHVzZXJJbmZvKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlckluZm8pXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlKVxuICAgIH1cbi8vIFxuICAgIGNyZWF0ZUNhcmQoZGF0YSkge1xuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCx7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlKTtcbiAgICB9XG4gICAgYWRkTGlrZShkYXRhKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtkYXRhLl9pZH0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2UpO1xuICAgIH1cbiAgXG4gICAgZGVsZXRlTGlrZShjYXJkSWQpIHtcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgZWRpdFVzZXJBdmF0YXIoYXZhdGFyVXJsKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGF2YXRhciA6IGF2YXRhclVybFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlKTtcbiAgICB9XG4gIFxuXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQXBwbHkgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ0bicpO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlQ29uZmlybSh7IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0IH0pIHtcbiAgICB0aGlzLl9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCA9IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCgpO1xuICAgICAgLy8gdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDYXJkLCBjb25maWd9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IsIGZvcm1TZXR0aW5nIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXAuanMnO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcbmltcG9ydCB7IFBvcHVwV2l0aEFwcGx5IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQXBwbHkuanNcIjtcbmltcG9ydCB7c2hvd0xvYWRpbmdUZXh0fSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcblxuY29uc3Qgb3BlblByb2ZpbGVCdXR0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7IC8vINCa0L3QvtC/0LrQuCDQtNC70Y8g0L/QvtC60LDQt9CwINC+0LrQvdCwXG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5wdXQtbmFtZScpO1xuY29uc3QgaW5wdXRJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lucHV0LWluZm8nKTtcbi8vNSDRgdC/0YDQuNC90YJcbmNvbnN0IG9wZW5DYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKVxuXG5jb25zdCBiaWdJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYmlnLWltYWdlJyk7XG5jb25zdCBiaWdUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYmlnLXRpdGxlJyk7XG5jb25zdCBjYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfaW1hZ2UnKVxuXG5cbi8vINCh0LXQu9C10LrRgtC+0YDRiyDQv9C+0L/QsNC/0L7QsjpcbmNvbnN0IHByb2ZpbGVQb3B1cFNlbGVjdG9yID0gJy5wb3B1cF9wcm9maWxlJztcbmNvbnN0IGFkZENhcmRQb3B1cFNlbGVjdG9yID0gJy5wb3B1cF9jYXJkJztcbmNvbnN0IGltYWdlUG9wdXBTZWxlY3RvciA9ICcucG9wdXBfaW1hZ2UnO1xuY29uc3QgYXZhdGFyUG9wdXBTZWxlY3RvciA9ICcucG9wdXBfYXZhdGFyJztcblxuXG5jb25zdCBmb3JtRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLXByb2ZpbGVcIik7XG5jb25zdCBmb3JtQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tY2FyZFwiKTtcbmNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0tYXZhdGFyJylcblxuXG4vLyDQodC10LvQtdC60YLQvtGAINC00LvRjyDQstGL0LHQvtGA0LAg0LrQvtC90YLQtdC50L3QtdGA0LAg0LrQsNGA0YLQvtGH0LXQujpcbmNvbnN0IHNlbGVjdG9yID0gJy5lbGVtZW50c19fbGlzdCc7XG5cbmNvbnN0IGJ0bkZvcm1TZWxlY3RvciA9ICcucG9wdXBfX3NhdmUtYnRuJztcbmNvbnN0IGJ0bkxvYWRpbmdUZXh0ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcblxuLy85XG5jb25zdCBhcGlPcHRpb25zID0ge1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MicsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnYmM0NDBiY2UtODhkMi00MGRlLTgxM2YtOTE4NmE1MjExYTcxJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn07XG5cblxuY29uc3QgdmFsaWRhdG9yUHJvZmlsZUZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZywgZm9ybUVkaXRQcm9maWxlKTtcbnZhbGlkYXRvclByb2ZpbGVGb3JtLmVuYWJsZVZhbGlkYXRpb24oKVxuY29uc3QgdmFsaWRhdG9yQ2FyZEZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZywgZm9ybUFkZENhcmQpO1xudmFsaWRhdG9yQ2FyZEZvcm0uZW5hYmxlVmFsaWRhdGlvbigpXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmcsIGZvcm1BdmF0YXIpXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxuLy8g0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBBcGk6XG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaU9wdGlvbnMpO1xuXG4vLyAgdXNlcklkXG5sZXQgdXNlcklkO1xuXG5cblxuY29uc3QgZGF0YVByb2ZpbGUgPSB7XG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXG4gIHByb2ZpbGVJbmZvU2VsZWN0b3I6ICcucHJvZmlsZV9fdGV4dCcsXG4gIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcbn1cblxuY29uc3QgdXNlckRhdGEgPSBuZXcgVXNlckluZm8oZGF0YVByb2ZpbGUpO1xuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZVBvcHVwU2VsZWN0b3IpO1xuY29uc3QgcG9wdXBXaXRoQXBwbHkgPSBuZXcgUG9wdXBXaXRoQXBwbHkoJy5wb3B1cF9kZWxldGUnKTtcblxuXG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKS5jcmVhdGVOZXdDYXJkKCk7XG4gICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgfSxcbn0sIHNlbGVjdG9yKVxuXG5cblxuLy/QtNCw0L3QvdGL0LUg0YEg0YHQtdGA0LLQtdGA0LAgXG5hcGkuZ2V0VXNlckRhdGEoKVxuICAudGhlbigodXNlcikgPT4ge1xuICAgIHVzZXJEYXRhLnNldFVzZXJJbmZvKHsgbmFtZTogdXNlci5uYW1lLCBhYm91dDogdXNlci5hYm91dCB9KTtcbiAgICB1c2VyRGF0YS5zZXRVc2VyQXZhdGFyKHsgbGluazogdXNlci5hdmF0YXIgfSk7XG4gICAgdXNlcklkID0gdXNlci5faWQ7XG4gICAgYXBpLmdldEluaXRpYWxDYXJkcygpXG4gICAgICAudGhlbigoY2FyZHMpID0+IHtcbiAgICAgICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gYWxlcnQoZXJyKSk7XG5cbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHByb2ZpbGVQb3B1cFNlbGVjdG9yLFxuICAodXNlckluZm8sIGJ0bkZvcm0pID0+IHtcbiAgICBjb25zdCBidG5Gb3JtSW5pdGlhbFRleHQgPSBidG5Gb3JtLnRleHRDb250ZW50O1xuICAgIHNob3dMb2FkaW5nVGV4dChidG5Gb3JtLCBidG5Mb2FkaW5nVGV4dCk7XG4gICAgYXBpLmVkaXRVc2VyRGF0YSh1c2VySW5mbylcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgdXNlckRhdGEuc2V0VXNlckluZm8ocmVzKTtcbiAgICAgICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgICB9KVxuXG4gICAgICAvLyAudGhlbigoKSA9PiB7XG4gICAgICAvLyAgIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgICAgLy8gfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7YWxlcnQoZXJyKVxuICAgICAgICAvLyB1c2VyRGF0YS5zZXRVc2VySW5mbyh1c2VySW5mbylcbiAgICAgIH0pXG4gICAgXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc2hvd0xvYWRpbmdUZXh0KGJ0bkZvcm0sIGJ0bkZvcm1Jbml0aWFsVGV4dClcbiAgICB9KVxuICB9LCBidG5Gb3JtU2VsZWN0b3IpO1xuXG5cbi8v0KHQu9GD0YjQsNGC0LXQu9GMINC90LAg0L7RgtC60YDRi9GC0LjQtSDQtNC70Y8g0L/RgNC+0YTQuNC70Y9cbi8vIG9wZW5Qcm9maWxlQnV0dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbi8vICAgY29uc3QgaW5mb09iamVjdCA9IHVzZXJEYXRhLmdldFVzZXJJbmZvKCk7XG4vLyAgIGlucHV0TmFtZS52YWx1ZSA9IGluZm9PYmplY3QubmFtZTtcbi8vICAgaW5wdXRJbmZvLnZhbHVlID0gaW5mb09iamVjdC5pbmZvO1xuLy8gICB2YWxpZGF0b3JQcm9maWxlRm9ybS5yZXNldFZhbGlkYXRpb24oKTtcbi8vICAgcHJvZmlsZVBvcHVwLm9wZW4oKVxuLy8gfSk7XG5mdW5jdGlvbiBwcm9maWxlRGF0YVNldCAoKXtcbiAgY29uc3QgaW5mb09iamVjdCA9IHVzZXJEYXRhLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IGluZm9PYmplY3QubmFtZTtcbiAgaW5wdXRJbmZvLnZhbHVlID0gaW5mb09iamVjdC5pbmZvO1xuICB2YWxpZGF0b3JQcm9maWxlRm9ybS5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKVxufTtcbm9wZW5Qcm9maWxlQnV0dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHByb2ZpbGVEYXRhU2V0KTtcblxuXG4vLyDRgdCw0LHQvNC40YLQsCDQtNC70Y8g0LrQsNGA0YLQvtGH0LXQulxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIGFkZENhcmRQb3B1cFNlbGVjdG9yLFxuICAoZGF0YSwgYnRuRm9ybSkgPT4ge1xuICAgIGNvbnN0IGJ0bkZvcm1Jbml0aWFsVGV4dCA9IGJ0bkZvcm0udGV4dENvbnRlbnQ7XG4gICAgc2hvd0xvYWRpbmdUZXh0KGJ0bkZvcm0sIGJ0bkxvYWRpbmdUZXh0KTtcbiAgICBhcGkuY3JlYXRlQ2FyZChkYXRhKVxuICAgICAgLnRoZW4oKGl0ZW0pID0+IHtcbiAgICAgICAgY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkuY3JlYXRlTmV3Q2FyZCgpKTtcbiAgICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKClcbiAgICAgIH0pXG4gICAgXG4gICAgLmNhdGNoKChlcnIpID0+IGFsZXJ0KGVycikpXG4gIFxuICAuZmluYWxseSgoKSA9PiB7XG4gICAgc2hvd0xvYWRpbmdUZXh0KGJ0bkZvcm0sIGJ0bkZvcm1Jbml0aWFsVGV4dClcbiAgfSlcbn0sIGJ0bkZvcm1TZWxlY3Rvcik7XG5cbi8vINGB0LvRg9GI0LDRgtC10LvRjCDQvdCwINC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwIGNhcmRcbm9wZW5DYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xuICB2YWxpZGF0b3JDYXJkRm9ybS5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5cblxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgY29uZmlnLCBoYW5kbGVDYXJkQ2xpY2ssIHVzZXJJZCwge1xuICAgIGhhbmRsZUxpa2VDYXJkOiAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGNhcmQuaXNMaWtlZCkge1xuICAgICAgICBhcGkuZGVsZXRlTGlrZShkYXRhLl9pZClcbiAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY2FyZC5pc0xpa2VkID0gZmFsc2U7XG4gICAgICAgICAgICBjYXJkLmdldExpa2VzTnVtYmVyKGRhdGEubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGNhcmQubGlrZUNhcmQoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGFwaS5hZGRMaWtlKGRhdGEpXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNhcmQuaXNMaWtlZCA9IHRydWU7XG4gICAgICAgICAgICBjYXJkLmdldExpa2VzTnVtYmVyKGRhdGEubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGNhcmQubGlrZUNhcmQoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAge1xuICAgIGhhbmRsZURlbGV0ZUNhcmQ6IChkYXRhLCBjYXJkKSA9PiB7XG4gICAgICBwb3B1cFdpdGhBcHBseS5vcGVuKCk7XG4gICAgICBwb3B1cFdpdGhBcHBseS5oYW5kbGVEZWxldGVDb25maXJtKHtcbiAgICAgICAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQ6ICgpID0+IHtcbiAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChkYXRhLl9pZClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICAgIHBvcHVwV2l0aEFwcGx5LmNsb3NlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAvLyAudGhlbigoKSA9PiB7XG4gICAgICAgICAgLy8gICBwb3B1cFdpdGhBcHBseS5jbG9zZSgpO1xuICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgKTtcbiAgcmV0dXJuIGNhcmRcbn1cblxuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2F2YXRhcicsIFxuICAgKGlucHV0RGF0YSwgYnRuRm9ybSkgPT4ge1xuICAgIGNvbnN0IGJ0bkZvcm1Jbml0aWFsVGV4dCA9IGJ0bkZvcm0udGV4dENvbnRlbnQ7XG4gICAgc2hvd0xvYWRpbmdUZXh0KGJ0bkZvcm0sIGJ0bkxvYWRpbmdUZXh0KTtcbiAgICBhcGkuZWRpdFVzZXJBdmF0YXIoaW5wdXREYXRhLmxpbmspXG4gICAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgICB1c2VyRGF0YS5zZXRVc2VyQXZhdGFyKHsgbGluazogdXNlci5hdmF0YXIgfSk7XG4gICAgICAgIGF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHNob3dMb2FkaW5nVGV4dChidG5Gb3JtLCBidG5Gb3JtSW5pdGlhbFRleHQpXG4gICAgICB9KVxuICAgIH0sIGJ0bkZvcm1TZWxlY3RvclxuICApXG5cbi8vINCe0YLQutGA0YvQstCw0LXQvCDRhNC+0YDQvNGDINCw0LLQsNGC0LDRgNCwXG5jb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpO1xuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhdmF0YXJQb3B1cC5vcGVuKCk7XG59KTtcblxuXG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gIGltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbn1cblxuXG4vLyDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INGB0L7QsdGL0YLQuNC5INC/0L7Qv9Cw0L/QvtCyXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aEFwcGx5LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuXG5cblxuXG4iXSwibmFtZXMiOlsic2hvd0xvYWRpbmdUZXh0IiwiYnRuRm9ybSIsInRleHQiLCJ0ZXh0Q29udGVudCIsImNvbmZpZyIsInNlbGVjdG9yTGlzdCIsInNlbGVjdG9yVGVtcGxhdGUiLCJjYXJkSW1nU2VsZWN0b3IiLCJjYXJkVGl0bGVTZWxlY3RvciIsImNhcmREZWxldGVCdG5TZWxlY3RvciIsInRvZ2dsZUxpa2VTZWxlY3RvciIsImFjdGl2ZUxpa2VCdG5DbGFzcyIsImNvdW50TGlrZXMiLCJmb3JtU2V0dGluZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNhcmREYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwidXNlcklkIiwiX3JlZiIsIl9yZWYyIiwiX3RoaXMiLCJoYW5kbGVMaWtlQ2FyZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2xhc3NDYWxsQ2hlY2siLCJfZGVmaW5lUHJvcGVydHkiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkRGF0YSIsIl9saWtlcyIsInNvbWUiLCJsaWtlciIsIl9pZCIsIl91c2VySWQiLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsImlzTGlrZWQiLCJyZW1vdmUiLCJsaWtlc051bWJlciIsIl9saWtlTnVtYmVyIiwiaW5uZXJIVE1MIiwidG9nZ2xlIiwiX2NhcmRPd25lciIsIl9kZWxldGVCdXR0b24iLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NvbmZpZyIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNhcmQiLCJsaWtlcyIsIm93bmVyIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJlbGVtZW50c0xpa2UiLCJfdGhpczIiLCJkZWxldGVDYXJkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVDYXJkRm9yU3VyZSIsIl9jYXJkSW1hZ2UiLCJfZ2V0VGVtcGxhdGUiLCJzcmMiLCJhbHQiLCJjb25jYXQiLCJsZW5ndGgiLCJfc2V0RGVsZXRlQnV0dG9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2dldENhcmRMaWtlIiwiZ2V0TGlrZXNOdW1iZXIiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNldHRpbmciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlckl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX3BvcHVwQmlnSW1hZ2UiLCJfcG9wdXBUaXRsZSIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQiLCJidG5Gb3JtU2VsZWN0b3IiLCJfdGhpc1N1cGVyIiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZCIsImlucHV0VmFsdWVzIiwiaW5wdXRJdGVtIiwiX2Zvcm0iLCJlIiwiX2hhbmRsZVByb2ZpbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2J0bkZvcm0iLCJfaW5wdXRGb3JtVmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlSW5mb1NlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfaW5mbyIsIl91c2VyQXZhdGFyIiwiaW5mbyIsImFib3V0IiwiQXBpIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfZ2V0UmVzcG9uc2UiLCJ1c2VySW5mbyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNhcmRJZCIsImF2YXRhclVybCIsImF2YXRhciIsIlBvcHVwV2l0aEFwcGx5Iiwib3BlblByb2ZpbGVCdXR0dG9uIiwiaW5wdXROYW1lIiwiaW5wdXRJbmZvIiwib3BlbkNhcmRCdXR0b24iLCJmb3JtRWRpdFByb2ZpbGUiLCJmb3JtQWRkQ2FyZCIsImZvcm1BdmF0YXIiLCJidG5Mb2FkaW5nVGV4dCIsInZhbGlkYXRvclByb2ZpbGVGb3JtIiwiZW5hYmxlVmFsaWRhdGlvbiIsInZhbGlkYXRvckNhcmRGb3JtIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsImFwaSIsImF1dGhvcml6YXRpb24iLCJ1c2VyRGF0YSIsImltYWdlUG9wdXAiLCJwb3B1cFdpdGhBcHBseSIsInNlY3Rpb24iLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJjcmVhdGVOZXdDYXJkIiwiYWRkSXRlbSIsImdldFVzZXJEYXRhIiwidXNlciIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzIiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhbGVydCIsInByb2ZpbGVQb3B1cCIsImJ0bkZvcm1Jbml0aWFsVGV4dCIsImVkaXRVc2VyRGF0YSIsImZpbmFsbHkiLCJpbmZvT2JqZWN0IiwiZ2V0VXNlckluZm8iLCJyZXNldFZhbGlkYXRpb24iLCJvcGVuIiwiYWRkQ2FyZFBvcHVwIiwiY2FyZCIsImRlbGV0ZUxpa2UiLCJsaWtlQ2FyZCIsImFkZExpa2UiLCJoYW5kbGVEZWxldGVDb25maXJtIiwiYXZhdGFyUG9wdXAiLCJpbnB1dERhdGEiLCJlZGl0VXNlckF2YXRhciIsInNldEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==